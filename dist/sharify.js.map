{"version":3,"file":null,"sources":["../src/modules/sharify.js","../src/utils/index.js","../src/index.js"],"sourcesContent":["// @flow\n\nexport default class Sharify {\n\n\tconstructor(options) {\n\t\tthis.defaults = {\n\t\t\trender: '.share',\n\t\t\tsites: ['weibo', 'qzone', 'qq', 'wechat', 'douban', 'linkedin', 'twitter', 'facebook', 'google', 'diandian']\n\t\t};\n\t\tthis.siteInfo = {\n\t\t\turl: window.location.href,\n\t\t\tsiteOrigin: window.location.origin,\n\t\t\tsource: document.getElementsByTagName('title')[0].innerText || document.title,\n\t\t\ttitle: document.getElementsByTagName('title')[0].innerText || document.title,\n\t\t\tdescription: this.getMeta('description'),\n\t\t\tsummary: this.getMeta('description'),\n\t\t\timage: this.getImage()\n\t\t};\n\t\tthis.options = this.extend({}, this.siteInfo, this.defaults, options);\n\t\tthis.element = this.query(this.options.render);\n\t\tthis._shareUrls = {\n\t\t\tweibo: `http://service.weibo.com/share/share.php?url=${ this.options.url }&title=${this.options.title}&pic=${this.options.image}`,\n\t\t\twechat: 'javascript:;',\n\t\t\tqzone: `http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=${ this.options.url }&title=${ this.options.title }&desc=${ this.options.description }&summary=${ this.options.summary }&site=${ this.options.source }`,\n\t\t\tqq: `http://connect.qq.com/widget/shareqq/index.html?url=${ this.options.url }&title=${ this.options.title }&source=${ this.options.source }&desc=${ this.options.description }&pics=${ this.options.image }&site=${ this.options.title }`,\n\t\t\tdouban: `http://shuo.douban.com/!service/share?href=${ this.options.url }&name=${ this.options.title }&text=${ this.options.description }&image=${ this.options.image }&starid=0&aid=0&style=11`,\n\t\t\tdiandian: `http://www.diandian.com/share?lo=${ this.options.url }&ti=${ this.options.title }&type=link`,\n\t\t\tlinkedin: `http://www.linkedin.com/shareArticle?mini=true&ro=true&title=${ this.options.title }&url=${ this.options.url }&summary=${ this.options.summary }&source=${ this.options.source }&armin=armin`,\n\t\t\tfacebook: `https://www.facebook.com/sharer/sharer.php?u=${ this.options.url }`,\n\t\t\ttwitter: `https://twitter.com/intent/tweet?text=${ this.options.title }&url=${ this.options.url }&via=${ this.options.siteOrigin }`,\n\t\t\t// pinterest: `https://www.pinterest.com/pin/create/button/?url=${ this.options.url }&media=${ this.options.image }&description=${ this.options.description }`,\n\t\t\tgoogle: `https://plus.google.com/share?url=${ this.options.url }`\n\t\t}\n\t\tthis.initialize();\n\t}\n\n\tinitialize() {\n\t\tthis.renderIcons();\n\t}\n\n\textend() {\n\t\tvar i,\n\t\t\tlen = arguments.length,\n\t\t\tproperty;\n\t\tfor(i = len - 1; i > 0; i --) {\n\t\t\tif(typeof arguments[i] !== 'object') {\n\t\t\t\tthrow Error('The parameter of the method extend() must be an object.');\n\t\t\t}\n\t\t\tfor(property in arguments[i]) {\n\t\t\t\targuments[i - 1][property] = arguments[i][property];\n\t\t\t}\n\t\t}\n\t\treturn arguments[0];\n\t}\n\n\trenderIcons() {\n\t\tlet sites = this.options.sites,\n\t\t\ti = 0,\n\t\t\tlen = sites.length,\n\t\t\tfragment = document.createDocumentFragment(),\n\t\t\t_shareUrls = this._shareUrls,\n\t\t\tweChatElement;\n\n\t\tfor (; i < len; i++) {\n\t\t\tlet iconNode,\n\t\t\t\tname = sites[i],\n\t\t\t\tnameLower = name.toLowerCase();\n\n\t\t\t// determine whether surport this social network share component.\n\t\t\tif(nameLower in _shareUrls) {\n\t\t\t\ticonNode = document.createElement('a');\n\t\t\t\ticonNode.setAttribute('class', 'share-icon icon-' + nameLower);\n\t\t\t\ticonNode.setAttribute('title', name);\n\t\t\t\ticonNode.setAttribute('target', '_blank');\n\t\t\t\ticonNode.setAttribute('href', _shareUrls[nameLower]);\n\n\t\t\t\tfragment.appendChild(iconNode);\n\t\t\t} else {\n\n\t\t\t\tthrow new Error(`Temporarily not supported ${ name } share.`);\n\t\t\t}\n\t\t}\n\n\t\tthis.element.appendChild(fragment);\n\n\t\tweChatElement = this.query('.icon-wechat');\n\t\tthis.renderWeChat(weChatElement);\n\t}\n\n\trenderWeChat(target) {\n\t\tlet weChatNode,\n\t\t\tweChatQrCode,\n\t\t\tcodeWrapper,\n\t\t\t// Use Top Scan Qr Code API.\n\t\t\tsrc = `http://qr.topscan.com/api.php?text=${ this.siteInfo.url }`;\n\n\t\tweChatQrCode = document.createElement('img');\n\t\tweChatQrCode.setAttribute('src', src);\n\t\tweChatQrCode.setAttribute('alt', 'WeChar Qr-Code');\n\n\t\tcodeWrapper = document.createElement('div');\n\t\tcodeWrapper.setAttribute('class', 'qr-code');\n\n\t\tcodeWrapper.appendChild(weChatQrCode);\n\n\t\ttarget.appendChild(codeWrapper);\n\t}\n\n\tgetMeta(name) {\n\t\tlet metas = document.getElementsByTagName('meta'),\n\t\t\tcontent,\n\t\t\tmetaArray = Array.prototype.slice.call(metas),\n\t\t\ti = 0,\n\t\t\tlen = metaArray.length;\n\n\t\tfor (; i < len; i ++) {\n\t\t\tif (metaArray[i].getAttribute['name'] = name) {\n\t\t\t\tcontent = metaArray[i].content;\n\t\t\t}\n\t\t}\n\t\treturn content;\n\t}\n\n\tgetImage() {\n\t\tlet body = document.getElementsByTagName('body')[0],\n\t\t\timage = body.getElementsByTagName('img')[0],\n\t\t\tsrc = image.src || image.getAttribute('src');\n\t\treturn src || '';\n\t}\n\n\tgetSites(url) {\n\t\t//\n\t}\n\n\tquery(selector) {\n\t\treturn document.querySelector(selector);\n\t}\n\n\tdata() {\n\t\tlet element = this.element;\n\t\treturn element.dataset;\n\t}\n}\n","export function extend() {\n    console.log('extend');\n}\n","// @flow\nimport Sharify from './modules/sharify';\nimport { extend } from './utils/index.js';\n\nextend();\n\nexport default Sharify;\n"],"names":["babelHelpers.typeof"],"mappings":"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"}