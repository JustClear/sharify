{"version":3,"file":null,"sources":["../src/utils/index.js","../src/index.js"],"sourcesContent":["// utils/index.js\n\nexport function getMeta(name) {\n    let metas = document.querySelectorAll('meta'),\n        content,\n        metaArray = Array.prototype.slice.call(metas);\n    metaArray.map(item => {\n        if (item.name == name) {\n            content = item.content;\n        }\n    });\n    return content;\n}\n\nexport function getImage() {\n    let image = document.querySelector('img'),\n        src = image.src || image.getAttribute('src');\n    return src || '';\n}\n\nexport function query(selector) {\n    return document.querySelector(selector);\n}\n\nexport function extend() {\n    var i,\n        len = arguments.length,\n        property;\n    for(i = len - 1; i > 0; i --) {\n        if(typeof arguments[i] !== 'object') {\n            throw Error('The parameter of the method extend() must be an object.');\n        }\n        for(property in arguments[i]) {\n            arguments[i - 1][property] = arguments[i][property];\n        }\n    }\n    return arguments[0];\n}\n","// @flow\n\nimport {\n\tgetMeta,\n\tgetImage,\n\tquery,\n\textend,\n} from './utils/index.js';\n\nexport default class Sharify {\n\tconstructor(options) {\n\t\tthis.defaults = {\n\t\t\telement: '.share',\n\t\t\tsites: ['weibo', 'qzone', 'qq', 'wechat', 'douban', 'linkedin', 'twitter', 'facebook', 'google', 'pinterest',],\n\t\t};\n\t\tthis.siteInfo = {\n\t\t\turl: location.href,\n\t\t\tsiteOrigin: location.origin,\n\t\t\tsource: document.title,\n\t\t\ttitle: document.title,\n\t\t\tdescription: getMeta('description'),\n\t\t\tsummary: getMeta('description'),\n\t\t\timage: getImage(),\n\t\t};\n\t\tthis.options = extend({}, this.siteInfo, this.defaults, options);\n\t\tthis.element = query(this.options.element);\n\t\tthis.shareUrls = {\n\t\t\tweibo: `http://service.weibo.com/share/share.php?url=${ this.options.url }&title=${this.options.title}&pic=${this.options.image}`,\n\t\t\twechat: 'javascript:;',\n\t\t\tqzone: `http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=${ this.options.url }&title=${ this.options.title }&desc=${ this.options.description }&summary=${ this.options.summary }&site=${ this.options.source }`,\n\t\t\tqq: `http://connect.qq.com/widget/shareqq/index.html?url=${ this.options.url }&title=${ this.options.title }&source=${ this.options.source }&desc=${ this.options.description }&pics=${ this.options.image }&site=${ this.options.title }`,\n\t\t\tdouban: `http://shuo.douban.com/!service/share?href=${ this.options.url }&name=${ this.options.title }&text=${ this.options.description }&image=${ this.options.image }&starid=0&aid=0&style=11`,\n\t\t\tlinkedin: `http://www.linkedin.com/shareArticle?mini=true&ro=true&title=${ this.options.title }&url=${ this.options.url }&summary=${ this.options.summary }&source=${ this.options.source }&armin=armin`,\n\t\t\tfacebook: `https://www.facebook.com/sharer/sharer.php?u=${ this.options.url }`,\n\t\t\ttwitter: `https://twitter.com/intent/tweet?text=${ this.options.title }&url=${ this.options.url }&via=${ this.options.siteOrigin }`,\n\t\t\tpinterest: `https://www.pinterest.com/pin/create/button/?url=${ this.options.url }&media=${ this.options.image }&description=${ this.options.description }`,\n\t\t\tgoogle: `https://plus.google.com/share?url=${ this.options.url }`,\n\t\t};\n\t\tthis.initialize();\n\t}\n\n\tinitialize() {\n\t\tthis.renderIcons();\n\t}\n\n\trenderIcons() {\n\t\tlet sites = this.options.sites,\n\t\t\tfragment = document.createDocumentFragment(),\n\t\t\tshareUrls = this.shareUrls,\n\t\t\tweChatIcon;\n\n\t\tsites.map((name) => {\n\t\t\tlet iconNode,\n\t\t\t\tnameLower = name.toLowerCase();\n\n\t\t\t// determine whether surport this social network share component.\n\t\t\tif (nameLower in shareUrls) {\n\t\t\t\ticonNode = document.createElement('a');\n\t\t\t\ticonNode.setAttribute('class', 'share-icon icon-' + nameLower);\n\t\t\t\ticonNode.setAttribute('title', name);\n\t\t\t\ticonNode.setAttribute('target', '_blank');\n\t\t\t\ticonNode.setAttribute('href', shareUrls[nameLower]);\n\t\t\t\tfragment.appendChild(iconNode);\n\t\t\t} else {\n\t\t\t\tthrow new Error(`Temporarily not supported ${ name } share.`);\n\t\t\t}\n\t\t});\n\n\t\tthis.element.appendChild(fragment);\n\t\tweChatIcon = query('.icon-wechat');\n\t\tthis.renderWeChat(weChatIcon);\n\t}\n\n\trenderWeChat(target) {\n\t\tlet weChatQrCode,\n\t\t\tcodeWrapper,\n\t\t\t// Use Top Scan Qr Code API.\n\t\t\tsrc = `http://qr.topscan.com/api.php?text=${ this.siteInfo.url }`;\n\n\t\tweChatQrCode = document.createElement('img');\n\t\tcodeWrapper = document.createElement('div');\n\t\tweChatQrCode.setAttribute('src', src);\n\t\tweChatQrCode.setAttribute('alt', 'WeChat Qr-Code');\n\t\tcodeWrapper.setAttribute('class', 'qr-code');\n\t\tcodeWrapper.appendChild(weChatQrCode);\n\t\ttarget.appendChild(codeWrapper);\n\t}\n}\n"],"names":["babelHelpers.typeof"],"mappings":"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"}