{"version":3,"file":null,"sources":["../src/utils/index.js","../src/index.js"],"sourcesContent":["// utils/index.js\n\nexport function getMeta() {\n    let metas = document.querySelectorAll('meta'),\n        content,\n        metaArray = Array.prototype.slice.call(metas);\n\n    metaArray.map((item, index) => {\n        if (item.getAttribute['name'] == name) {\n            content = item.content;\n        }\n    });\n    return content;\n}\n\nexport function getImage() {\n    let body = document.querySelector('body'),\n        image = document.querySelector('img'),\n        src = image.src || image.getAttribute('src');\n    return src || '';\n}\n\nexport function query(selector) {\n    return document.querySelector(selector);\n}\n\nexport function extend() {\n    var i,\n        len = arguments.length,\n        property;\n    for(i = len - 1; i > 0; i --) {\n        if(typeof arguments[i] !== 'object') {\n            throw Error('The parameter of the method extend() must be an object.');\n        }\n        for(property in arguments[i]) {\n            arguments[i - 1][property] = arguments[i][property];\n        }\n    }\n    return arguments[0];\n}\n","// @flow\n\nimport {\n\tgetMeta,\n\tgetImage,\n\tquery,\n\textend,\n} from './utils/index.js';\n\nexport default class Sharify {\n\n\tconstructor(options) {\n\t\tthis.defaults = {\n\t\t\telement: '.share',\n\t\t\tsites: ['weibo', 'qzone', 'qq', 'wechat', 'douban', 'linkedin', 'twitter', 'facebook', 'google', 'diandian']\n\t\t};\n\t\tthis.siteInfo = {\n\t\t\turl: location.href,\n\t\t\tsiteOrigin: location.origin,\n\t\t\tsource: document.title,\n\t\t\ttitle: document.title,\n\t\t\tdescription: getMeta('description'),\n\t\t\tsummary: getMeta('description'),\n\t\t\timage: getImage(),\n\t\t};\n\t\tthis.options = extend({}, this.siteInfo, this.defaults, options);\n\t\tthis.element = query(this.options.element);\n\t\tthis.shareUrls = {\n\t\t\tweibo: `http://service.weibo.com/share/share.php?url=${ this.options.url }&title=${this.options.title}&pic=${this.options.image}`,\n\t\t\twechat: 'javascript:;',\n\t\t\tqzone: `http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=${ this.options.url }&title=${ this.options.title }&desc=${ this.options.description }&summary=${ this.options.summary }&site=${ this.options.source }`,\n\t\t\tqq: `http://connect.qq.com/widget/shareqq/index.html?url=${ this.options.url }&title=${ this.options.title }&source=${ this.options.source }&desc=${ this.options.description }&pics=${ this.options.image }&site=${ this.options.title }`,\n\t\t\tdouban: `http://shuo.douban.com/!service/share?href=${ this.options.url }&name=${ this.options.title }&text=${ this.options.description }&image=${ this.options.image }&starid=0&aid=0&style=11`,\n\t\t\tdiandian: `http://www.diandian.com/share?lo=${ this.options.url }&ti=${ this.options.title }&type=link`,\n\t\t\tlinkedin: `http://www.linkedin.com/shareArticle?mini=true&ro=true&title=${ this.options.title }&url=${ this.options.url }&summary=${ this.options.summary }&source=${ this.options.source }&armin=armin`,\n\t\t\tfacebook: `https://www.facebook.com/sharer/sharer.php?u=${ this.options.url }`,\n\t\t\ttwitter: `https://twitter.com/intent/tweet?text=${ this.options.title }&url=${ this.options.url }&via=${ this.options.siteOrigin }`,\n\t\t\tpinterest: `https://www.pinterest.com/pin/create/button/?url=${ this.options.url }&media=${ this.options.image }&description=${ this.options.description }`,\n\t\t\tgoogle: `https://plus.google.com/share?url=${ this.options.url }`\n\t\t}\n\t\tthis.initialize();\n\t}\n\n\tinitialize() {\n\t\tthis.renderIcons();\n\t}\n\n\trenderIcons() {\n\t\tlet sites = this.options.sites,\n\t\t\tfragment = document.createDocumentFragment(),\n\t\t\tshareUrls = this.shareUrls,\n\t\t\tweChatIcon;\n\n\t\tsites.map((name) => {\n\t\t\tlet iconNode,\n\t\t\t\tnameLower = name.toLowerCase();\n\n\t\t\t// determine whether surport this social network share component.\n\t\t\tif (nameLower in shareUrls) {\n\t\t\t\ticonNode = document.createElement('a');\n\t\t\t\ticonNode.setAttribute('class', 'share-icon icon-' + nameLower);\n\t\t\t\ticonNode.setAttribute('title', name);\n\t\t\t\ticonNode.setAttribute('target', '_blank');\n\t\t\t\ticonNode.setAttribute('href', shareUrls[nameLower]);\n\t\t\t\tfragment.appendChild(iconNode);\n\t\t\t} else {\n\t\t\t\tthrow new Error(`Temporarily not supported ${ name } share.`);\n\t\t\t}\n\t\t});\n\n\t\tthis.element.appendChild(fragment);\n\t\tweChatIcon = query('.icon-wechat');\n\t\tthis.renderWeChat(weChatIcon);\n\t}\n\n\trenderWeChat(target) {\n\t\tlet weChatQrCode,\n\t\t\tcodeWrapper,\n\t\t\t// Use Top Scan Qr Code API.\n\t\t\tsrc = `http://qr.topscan.com/api.php?text=${ this.siteInfo.url }`;\n\n\t\tweChatQrCode = document.createElement('img');\n\t\tcodeWrapper = document.createElement('div');\n\t\tweChatQrCode.setAttribute('src', src);\n\t\tweChatQrCode.setAttribute('alt', 'WeChat Qr-Code');\n\t\tcodeWrapper.setAttribute('class', 'qr-code');\n\t\tcodeWrapper.appendChild(weChatQrCode);\n\t\ttarget.appendChild(codeWrapper);\n\t}\n}\n"],"names":["getMeta","metas","document","querySelectorAll","content","metaArray","Array","prototype","slice","call","map","item","index","getAttribute","name","getImage","image","querySelector","src","query","selector","extend","i","property","len","arguments","length","babelHelpers.typeof","Error","Sharify","options","defaults","siteInfo","location","href","origin","title","this","element","shareUrls","url","description","summary","source","siteOrigin","initialize","renderIcons","sites","fragment","createDocumentFragment","weChatIcon","iconNode","nameLower","toLowerCase","createElement","setAttribute","appendChild","renderWeChat","target","weChatQrCode","codeWrapper"],"mappings":"4LAEO,SAASA,QACRC,GAAQC,SAASC,iBAAiB,QAClCC,SACAC,EAAYC,MAAMC,UAAUC,MAAMC,KAAKR,YAEjCS,IAAI,SAACC,EAAMC,GACbD,EAAKE,aAAL,MAA6BC,SACnBH,EAAKP,WAGhBA,EAGJ,QAASW,QAERC,IADOd,SAASe,cAAc,QACtBf,SAASe,cAAc,QAC/BC,EAAMF,EAAME,KAAOF,EAAMH,aAAa,aACnCK,IAAO,GAGX,QAASC,GAAMC,SACXlB,UAASe,cAAcG,GAG3B,QAASC,QACRC,GAEAC,EADAC,EAAMC,UAAUC,WAEhBJ,EAAIE,EAAM,EAAGF,EAAI,EAAGA,IAAM,IACC,WAAxBK,EAAOF,UAAUH,SACVM,OAAM,+DAEZL,IAAYE,WAAUH,aACZA,EAAI,GAAGC,GAAYE,UAAUH,GAAGC,SAG3CE,WAAU,ihBC7BAI,wBAERC,kBACNC,kBACK,gBACD,QAAS,QAAS,KAAM,SAAU,SAAU,WAAY,UAAW,WAAY,SAAU,kBAE7FC,cACCC,SAASC,gBACFD,SAASE,cACbjC,SAASkC,YACVlC,SAASkC,kBACHpC,EAAQ,uBACZA,EAAQ,qBACVe,UAEHe,QAAUT,KAAWgB,KAAKL,SAAUK,KAAKN,SAAUD,QACnDQ,QAAUnB,EAAMkB,KAAKP,QAAQQ,cAC7BC,iEACoDF,KAAKP,QAAQU,cAAcH,KAAKP,QAAQM,cAAaC,KAAKP,QAAQd,aAClH,uFACkEqB,KAAKP,QAAQU,cAAeH,KAAKP,QAAQM,eAAgBC,KAAKP,QAAQW,wBAAyBJ,KAAKP,QAAQY,iBAAkBL,KAAKP,QAAQa,iEACzJN,KAAKP,QAAQU,cAAeH,KAAKP,QAAQM,iBAAkBC,KAAKP,QAAQa,gBAAiBN,KAAKP,QAAQW,qBAAsBJ,KAAKP,QAAQd,eAAgBqB,KAAKP,QAAQM,2DAC3KC,KAAKP,QAAQU,aAAcH,KAAKP,QAAQM,eAAgBC,KAAKP,QAAQW,sBAAuBJ,KAAKP,QAAQd,8EACjHqB,KAAKP,QAAQU,WAAYH,KAAKP,QAAQM,4FACVC,KAAKP,QAAQM,cAAeC,KAAKP,QAAQU,gBAAiBH,KAAKP,QAAQY,mBAAoBL,KAAKP,QAAQa,+EACxHN,KAAKP,QAAQU,qDACrBH,KAAKP,QAAQM,cAAeC,KAAKP,QAAQU,YAAaH,KAAKP,QAAQc,yEACtDP,KAAKP,QAAQU,cAAeH,KAAKP,QAAQd,sBAAuBqB,KAAKP,QAAQW,wDAC/FJ,KAAKP,QAAQU,UAEvDK,iEAIAC,uDAIDC,GAAQV,KAAKP,QAAQiB,MACxBC,EAAW9C,SAAS+C,yBACpBV,EAAYF,KAAKE,UACjBW,WAEKxC,IAAI,SAACI,MACNqC,UACHC,EAAYtC,EAAKuC,mBAGdD,IAAab,SAQV,IAAIX,oCAAoCd,eAPnCZ,SAASoD,cAAc,OACzBC,aAAa,QAAS,mBAAqBH,KAC3CG,aAAa,QAASzC,KACtByC,aAAa,SAAU,YACvBA,aAAa,OAAQhB,EAAUa,MAC/BI,YAAYL,UAMlBb,QAAQkB,YAAYR,KACZ7B,EAAM,qBACdsC,aAAaP,wCAGNQ,MACRC,UACHC,iDAE6CvB,KAAKL,SAASQ,MAE7CtC,SAASoD,cAAc,SACxBpD,SAASoD,cAAc,SACxBC,aAAa,MAAOrC,KACpBqC,aAAa,MAAO,oBACrBA,aAAa,QAAS,aACtBC,YAAYG,KACjBH,YAAYI"}